# multi-orbit - 技術スタック解説

## プロジェクト概要

**multi-orbit**は、鈴鹿高専卒業ライブの特設Webサイトです。アーティストのタイムテーブル表示、出演者情報、カウントダウン機能などを備えた、インタラクティブで視覚的に魅力的なSPAです。

- **開発期間**: 2026年1月
- **イベント日程**: 2026年3月7日(土) - 8日(日)
- **目的**: イベント告知・情報提供・ブランディング

---

## コア技術スタック

### フレームワーク・ランタイム

#### Next.js 16.0.10
**採用理由:**
- **SSR（サーバーサイドレンダリング）とSSG（静的サイト生成）の両立** - SEO最適化とパフォーマンスの向上
- **App Router** - 最新のファイルベースルーティングシステムによる直感的な開発体験
- **自動コード分割** - 必要なJavaScriptのみを読み込むことでページ速度を最適化
- **Image最適化** - 自動的な画像最適化によるWebP変換とレスポンシブ対応

**使用場面:**
- ページ構造の定義（`app/page.tsx`, `app/layout.tsx`）
- メタデータとSEO設定
- API Routes（必要に応じて）

#### React 19.2.0
**採用理由:**
- **宣言的UI** - 状態に基づいた効率的なUI構築
- **コンポーネントベース設計** - 再利用可能なUIパーツによる保守性の向上
- **強力なエコシステム** - 豊富なライブラリとツールのサポート
- **Hooks API** - 関数コンポーネントでの状態管理とライフサイクル制御

**使用場面:**
- 全コンポーネントの基盤
- カスタムフック（`hooks/use-countdown.ts`, `hooks/use-timetable.ts`）
- 状態管理とイベント処理

#### TypeScript 5
**採用理由:**
- **型安全性** - コンパイル時のエラー検出によるバグの早期発見
- **IntelliSense** - IDEでの自動補完による開発効率の向上
- **リファクタリング支援** - 大規模な変更時の安全性確保
- **ドキュメント代わり** - 型定義が仕様書の役割を果たす

**使用場面:**
- 全ての`.ts`, `.tsx`ファイル
- 型定義（`types/data.ts`）
- データスキーマの定義

---

### UI・スタイリング

#### Tailwind CSS 4.1.9
**採用理由:**
- **ユーティリティファースト** - HTMLから離れずに高速なスタイリング
- **デザインシステムの一貫性** - 設定ファイルによる統一的な色・間隔・タイポグラフィ
- **パフォーマンス** - 未使用のCSSを自動削除（PurgeCSS）
- **レスポンシブ対応** - ブレークポイントの簡潔な記述

**使用場面:**
- 全コンポーネントのスタイリング
- レスポンシブデザイン
- ダークモード対応

#### Radix UI（複数パッケージ）
**採用理由:**
- **アクセシビリティ完備** - ARIA属性やキーボード操作を標準搭載
- **スタイル非依存** - 独自デザインを適用可能
- **WAI-ARIA準拠** - 国際的なアクセシビリティ基準をクリア
- **型安全** - TypeScriptフルサポート

**使用パッケージ:**
- Dialog, Dropdown Menu, Accordion, Tabs
- Toast, Popover, Tooltip
- Progress, Slider, Switch

**使用場面:**
- モーダル・ドロップダウンなどのインタラクティブUI
- アクセシブルなフォームコントロール（`components/ui/`）

#### Framer Motion 12.29.0
**採用理由:**
- **宣言的アニメーション** - React的な記述でスムーズなアニメーション実装
- **パフォーマンス最適化** - GPU加速による60fps達成
- **ジェスチャー対応** - ドラッグ・スワイプ・ホバーの簡単な実装
- **レイアウトアニメーション** - 要素のサイズ変更時の自動アニメーション

**使用場面:**
- ページ遷移・スクロールアニメーション（`components/navigation.tsx`）
- ヒーローセクションのフェードイン（`components/hero-section.tsx`）
- インタラクティブな要素の動き

#### next-themes 0.4.6
**採用理由:**
- **ダークモード対応** - ライト/ダークモードの簡単な切り替え
- **システム設定連携** - OSの設定を自動検出
- **フラッシュ防止** - 初回読み込み時のテーマ切り替えフラッシュを防止

**使用場面:**
- テーマプロバイダー（`components/theme-provider.tsx`）
- 全体的なカラースキーム管理

---

### 3Dグラフィックス

#### Three.js 0.182.0 + React Three Fiber 9.5.0
**採用理由:**
- **WebGL抽象化** - 低レベルなWebGL APIをReactコンポーネントとして扱える
- **パフォーマンス** - ハードウェアアクセラレーションによる高速レンダリング
- **豊富なエコシステム** - シェーダー・ライティング・物理エンジンなどの拡張機能

**使用場面:**
- 地球の3D表示（`components/earth.tsx`）
- 宇宙空間の演出（`components/starfield.tsx`）
- 軌道リング（`components/orbital-rings.tsx`）

#### React Three Drei 10.7.7
**採用理由:**
- **ヘルパーコンポーネント** - よく使う3D要素の簡単な実装
- **カメラコントロール** - OrbitControlsなどの標準機能
- **エフェクト** - Bloomやグローなどのポストプロセス

**使用場面:**
- 環境光・カメラ設定
- テクスチャローダー

#### react-digital-earth（カスタムライブラリ）
**採用理由:**
- **専用の地球表示コンポーネント** - 昼夜テクスチャの切り替え
- **カスタマイズ性** - イベントテーマに合わせた演出

**使用場面:**
- ヒーローセクションの中央地球表示

---

### フォーム・バリデーション

#### React Hook Form 7.60.0
**採用理由:**
- **パフォーマンス** - 非制御コンポーネントによる不要な再レンダリング防止
- **型安全** - TypeScriptとの完全統合
- **バリデーション統合** - Zodとのシームレスな連携

#### Zod 3.25.76
**採用理由:**
- **スキーマバリデーション** - 型安全なデータ検証
- **エラーメッセージ** - カスタマイズ可能なユーザーフレンドリーなエラー
- **TypeScript推論** - スキーマから型を自動生成

**使用場面:**
- フォーム入力の検証（問い合わせフォームなど）
- APIレスポンスの型チェック

---

### データ管理

#### JSON静的データ
**採用理由:**
- **シンプルさ** - バックエンド不要で開発・デプロイが容易
- **パフォーマンス** - ビルド時に静的ファイルとして埋め込み
- **型安全** - TypeScriptインターフェースで型チェック

**データファイル:**
- `data/timetable.json` - タイムテーブル情報
- `data/artists.json` - アーティスト情報

**型定義:**
```typescript
// types/data.ts
export interface TimetableItem {
  time: string
  artist?: string
  event?: string
  color: "cyan" | "purple" | "lime" | "muted"
}
```

---

### ユーティリティ・UI拡張

#### Lucide React 0.454.0
**採用理由:**
- **豊富なアイコン** - 1000+のSVGアイコン
- **軽量** - Tree Shakingによる必要なアイコンのみバンドル
- **カスタマイズ性** - サイズ・色・ストロークの調整が容易

**使用場面:**
- ナビゲーションアイコン（Menu, X）
- UIアクション（ChevronDown, Info, Calendar）

#### clsx + tailwind-merge
**採用理由:**
- **条件付きクラス** - 動的なクラス名の生成
- **Tailwindクラスの競合解決** - 重複するユーティリティクラスの自動マージ

**使用場面:**
- `lib/utils.ts`の`cn()`ヘルパー関数
- 全コンポーネントでの動的スタイリング

#### date-fns 4.1.0
**採用理由:**
- **モジュラー** - 必要な関数のみインポート
- **不変性** - Immutableな日付操作
- **軽量** - Moment.jsより小サイズ

**使用場面:**
- カウントダウンタイマー（`components/countdown.tsx`）
- 日付フォーマット

#### Sonner 1.7.4
**採用理由:**
- **美しいトースト通知** - モダンなデザイン
- **アクセシブル** - スクリーンリーダー対応
- **簡単な実装** - 最小限のコードで通知機能を実現

**使用場面:**
- 成功/エラー通知
- ユーザーアクション結果のフィードバック

---

### 開発環境・ツール

#### Bun 1.3.6
**採用理由:**
- **高速** - npm/yarnより数倍高速なパッケージ管理
- **オールインワン** - ランタイム・バンドラー・テストランナーを統合
- **Node.js互換** - 既存のnpmパッケージをそのまま利用可能

**使用場面:**
- パッケージインストール
- 開発サーバー起動（`bun run dev`）
- ビルド実行

#### PostCSS 8.5
**採用理由:**
- **Tailwindの必須依存** - Tailwind CSSの処理に必要
- **モダンCSS変換** - ブラウザ互換性の確保
- **プラグインエコシステム** - Autoprefixerなどの拡張

#### ESLint
**採用理由:**
- **コード品質** - 潜在的なバグを検出
- **一貫性** - チーム開発でのコーディングスタイル統一
- **Next.js統合** - Next.js推奨ルールセット

---

## アーキテクチャ設計

### ディレクトリ構造
```
app/           # Next.js App Router
components/    # 再利用可能なUIコンポーネント
  ui/          # 基礎UIコンポーネント（Radix UI wrappers）
data/          # 静的JSONデータ
hooks/         # カスタムReact Hooks
lib/           # ユーティリティ関数
types/         # TypeScript型定義
public/        # 静的アセット（画像など）
```

### コンポーネント設計
- **Atomic Design原則** - Atoms（ui/）→ Molecules → Organisms
- **関心の分離** - UIロジックとビジネスロジックの分離
- **カスタムフック** - 状態管理ロジックの再利用

### パフォーマンス最適化
1. **コード分割** - Next.jsの自動コード分割
2. **画像最適化** - Next.js Imageコンポーネント
3. **CSS最適化** - Tailwindの未使用クラス削除
4. **3D最適化** - Three.jsのレンダリング最適化

### アクセシビリティ
- **WCAG 2.1準拠** - Radix UIによる標準対応
- **キーボードナビゲーション** - 全インタラクティブ要素対応
- **スクリーンリーダー対応** - 適切なARIA属性
- **カラーコントラスト** - WCAG AAレベル以上

---

## デプロイ・運用

### ホスティング（推定）
- **Vercel** - Next.jsの最適なプラットフォーム
- **自動デプロイ** - Gitプッシュで自動ビルド・デプロイ
- **エッジネットワーク** - グローバルCDNによる高速配信

### 監視・分析
- **@vercel/analytics** - パフォーマンス監視
- **リアルユーザー監視** - 実際のユーザー体験計測

---

## 技術的な工夫点

### 1. Hydrationエラーの防止
**課題**: SSRとクライアントレンダリングの不一致
**解決策**: `mounted`ステート管理による段階的レンダリング

```typescript
const [mounted, setMounted] = useState(false)
useEffect(() => {
  setMounted(true)
}, [])
```

### 2. 3Dパフォーマンスの最適化
**課題**: Three.jsの重いレンダリング
**解決策**: 
- Canvas外でのHTML要素配置
- 必要な場所のみ3D表示
- ローポリゴンモデルの使用

### 3. レスポンシブデザイン
**課題**: デバイスごとの最適な表示
**解決策**:
- Tailwindのブレークポイント活用
- モバイルファーストアプローチ
- タッチジェスチャー対応

### 4. 型安全なデータ管理
**課題**: JSONデータの型保証
**解決策**:
- TypeScriptインターフェース定義
- カスタムフックでの型ガード
- Zodによるランタイム検証

---

## 今後の拡張可能性

1. **CMSシステム統合** - Contentful/Sanityでの動的コンテンツ管理
2. **チケット購入機能** - Stripe決済連携
3. **ユーザー認証** - NextAuth.jsによるソーシャルログイン
4. **リアルタイム更新** - WebSocketでのライブ情報配信
5. **多言語対応** - next-i18nextによる国際化
6. **PWA化** - オフライン対応とアプリライク体験

---

## まとめ

このプロジェクトは、**モダンなフロントエンド技術を組み合わせた、パフォーマンスとUXを両立させたWebアプリケーション**です。

### 主要な技術的強み
- **型安全性** - TypeScript + Zodによる堅牢な開発
- **パフォーマンス** - Next.js SSR + Tailwind CSS最適化
- **アクセシビリティ** - Radix UIによるWCAG準拠
- **視覚体験** - Three.js + Framer Motionによるリッチな演出
- **保守性** - コンポーネント設計 + カスタムフックによる再利用性

### ビジネス価値
- **SEO最適化** - イベント検索流入の最大化
- **ブランディング** - 3Dグラフィックスによる差別化
- **ユーザー体験** - スムーズなアニメーションと直感的なUI
- **開発効率** - 型安全性と再利用性による高速開発

---

**制作**: 2026年1月  
**技術スタック**: Next.js 16, React 19, TypeScript 5, Tailwind CSS 4, Three.js  
**目的**: 鈴鹿高専卒業ライブの情報周知
